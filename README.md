slavik smart home backend
============

This is a backend server for control IoT devices.  

## Functions are implemented:

* Connection and authorization of iot devices via WebSocket protocol, secured by JWT 
* Control of iot devices by WebSocket protocol
* REST api for client-server interaction, secured by JWT
* Storage of data from devices

## <a id="anchor"></a> Running the application locally by JVM

The application can be started locally using the following command:

~~~
$ ./gradlew clean build
$ java -jar build/libs/*.jar \
    --jwt.secret=<secret> \
    --default.admin.username=<default_username> \
    --default.admin.password=<default_password> \
    --spring.datasource.username=<db_username> \
    --spring.datasource.password=<db_password>
~~~

where `<secret>` is a HS512 secret key to use with JWT, generated by command `openssl rand -base64 172 | tr -d '\n'`  

where `<default_username>` is a username for ADMIN user created by default  

where `<default_password>` is a password for ADMIN user created by default  

where `<db_username>` is a username for database connection  

where `<default_password>` is a password for database connection  

## Running the application on Docker

The application can be started on Docker using the following command:

~~~
$ docker pull slaaavyn/home-backend:latest
$ docker run \
    --name=<container_name> \
    --port=8080:8080 \\
    --env=jwt.secret=<secret> \
    --env=default.admin.username=<default_username> \
    --env=default.admin.password=<default_password> \
    --env=spring.datasource.username=<db_username> \
    --env=spring.datasource.password=<db_password>
~~~

The description of the commands is described [here](#anchor).  